graph TD
    subgraph Desktop Path
        UI[Client UI] --> MCP[MCP Server]
        MCP --> API[Spring Boot API]
        API --> Ledger[Assurance Ledger]
        Ledger --> Dashboards[Variance / Heat-map]
    end

    subgraph SaaS Path
        CSV[CSV Ingest] --> Norm[Normalisation & ESG Enrichment]
        ERP[ERP Sync] --> Norm
        Registry[Registry API] --> Norm
        Norm --> Rules[Rules Engine]
        Rules --> Ledger
    end

    %% Latency annotations
    classDef latency fill:#fff,stroke:#ccf,stroke-width:1px,font-size:10px;
    MCP:::latency -->|"â‰¤200 ms p95"| API